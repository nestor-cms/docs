<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Nestor Documentation</title>
  <link rel="stylesheet" href="css/style.css">
  <script type="text/javascript" src="js/scripts.js"></script>
</head>
<body onload="includeHTML()">
  <div id="menu" menu-html="menu.html">

  </div>

  <div class="main">
<h1>The Component Class</h1>
<hr size="3" width="100%" align="center"/>

<p>
    The Component Class is the base class from which most components are
    extended. This class contains a core set of methods which can be
    overwritten, as well as methods critical to system processes. This document
    describes how to use the Component class methods and properties to interact
    with the Nestor system.
</p>
<p>
    Nestor provides a robust scaffolding onto which you can build features
    in your component to plug into the system at multiple execution points. There
    are also many opportunities to invoke a custom component method using
    system hooks. Refer to the <a href="extend_hooks.htm">Hooks section</a> for more details about using
    hooks. Also, the <a href="extend_page_build.htm">Page Build process</a> section refers to a series of flow
    diagrams that map the main processes executed to build a page. These
    diagrams visually depict where hooks are invoked throughout the Page Build process, as well as how the Component class methods and properties interact with the Nestor Core Engine classes.
</p>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top" class="header_cell">Properties
            </td>
        </tr>
    </tbody>
</table>
<p>
    There are no properties set directly in the base Component class.
    Properties are assigned to the component in a few different ways:
</p>
<ol>
    <li>Properties that you assign programmatically. The most common way to add
        them is to put them in the properties array in the <a href="#component_info"> component_info() method</a>.
    </li>
    <li>The parent/child/sibling relationships recorded in the <span class="italic">[your_db]</span>_components table are added to components in the global
        $page object component array during Page Build.</li>
    <li>Properties assigned when the component is added to a Recipe using the Manage Recipes page, stored in the database.</li>
    <li>Properties assigned when a component is installed, activated or deleted using the Manage Components page, stored in the database.</li>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <th width="165" valign="top">

                    <strong>Name</strong>

            </th>
            <th width="139" valign="top">

                    <strong>Type</strong>

            </th>
            <th width="632" valign="top">

                    <strong>Description</strong>

            </th>
        </tr>
        <tr>
            <td width="136" valign="top" class="purple">

                    $component_id

            </td>
            <td width="143" valign="top">

                    Int

            </td>
            <td width="657" valign="top">

                    Component ID from the <span class="italic">[your_db]</span>_components table.
                    Specifies a particular component associated with a page.
                    There can be many instances of components with the same
                    component type in the <span class="italic">[your_db]</span>_components table

            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="purple">

                    $parent_id

            </td>
            <td width="143" valign="top">

                    Int

            </td>
            <td width="657" valign="top">

                    Parent ID from the <span class="italic">[your_db]</span>_components table.
                    Component will have a parent if it’s nested under another
                    component in a Recipe, or has been added to a page by an
                    end user

            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="purple">

                    $sequence

            </td>
            <td width="143" valign="top">

                    Int

            </td>
            <td width="657" valign="top">The order in which this component is rendered on a page, related to other components on the same page. From the <span class="italic">[your_db]</span>_components table.
            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="orange">

                    $url

            </td>
            <td width="143" valign="top">

                    String

            </td>
            <td width="657" valign="top">

                    The url property is only assigned if this component is an
                    “anchor” in a recipe. This value specifies the path used to
                    load the page, and is stored in the <span class="italic">[your_db]</span>
                    _components table.

            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="orange">

                    $recipe

            </td>
            <td width="143" valign="top">

                    String

            </td>
            <td width="657" valign="top">

                    JSON encoded string that represents the Recipe for a page.
                    This will be added to the component if it’s an “anchor” for
                    a Recipe. From the <span class="italic">[your_db]</span>_components_meta
                    table.

            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="purple">

                    $created_at

            </td>
            <td width="143" valign="top">

                    String

            </td>
            <td width="657" valign="top">

                    Timestamp that represents when the component was installed
from the Manage Components page. From the                    <span class="italic">[your_db]</span>_components_meta table.

            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="purple">

                    $created_by

            </td>
            <td width="143" valign="top">

                    String

            </td>
            <td width="657" valign="top">ID of the user that created the component. From the  <span class="italic">[your_db]</span>_components_meta table.

            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="purple">

                    $title

            </td>
            <td width="143" valign="top">

                    String

            </td>
            <td width="657" valign="top">

                    Title that is set in component properties when it’s added
                    to a Recipe. Shows up in various areas of the page UX. From
                    the <span class="italic">[your_db]</span>_components_meta table.

            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="purple">

                    $type

            </td>
            <td width="143" valign="top">

                    String

            </td>
            <td width="657" valign="top">

                    Name of the class from which this component is created.
                    From the <span class="italic">[your_db]</span>_components_meta table.

            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="orange">

                    $template

            </td>
            <td width="143" valign="top" >

                    String

            </td>
            <td width="657" valign="top">

                    Specifies a template if this component uses any template
                    other than the default. From the <span class="italic">[your_db]</span>
                    _components_meta table.

            </td>
        </tr>
        <tr>
            <td width="136" valign="top" class="orange">

                    [key]

            </td>
            <td width="143" valign="top">

                    String

            </td>
            <td width="657" valign="top">

                    Other key/value pairs associated with this component found
                    in the <span class="italic">[your_db]</span>_components_meta table. Examples
                    are class-specific role permissions. Can be assigned in
                    component_info() or other component methods.

            </td>
        </tr>
    </tbody>
</table>
<p>
    <strong>Color Key</strong>:
</p>
<p>
    <span class="purple">Purple</span> – values that every component will have, normally from the database
</p>
<p>
    <span class="orange">Orange</span> – values that a component may have, source indicated in the
    description
</p>
<table border="1" cellspacing="0" cellpadding="0" id="methods">
    <tbody>
        <tr>
            <td width="935" valign="top" class="header_cell">Methods
            </td>
        </tr>
    </tbody>
</table>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <th width="306" valign="top">

                    <strong>Name/Syntax</strong>

            </th>
            <th width="630" valign="top">

                    <strong>Description</strong>

            </th>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#activated"
                        >
                            activated
                        </a>
                    </strong>
                    ( )

            </td>
            <td width="630" valign="top">

                    Called when the component is activated

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#add_component"
                        >
                            add_component
                        </a>
                    </strong>
                    ($each_recipe_component, $vce)

            </td>
            <td width="630" valign="top">

                    Creates and adds the HTML content to allow an end user to
                    add a component of this type to the page

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#add_component_finish"
                        >
                            add_component_finish
                        </a>
                    </strong>
                    ($each_component, $vce)

            </td>
            <td width="630" valign="top">

                    Creates the HTML content to bookend the add_component( )
                    content.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#allow_sub_components"
                        >
                            allow_sub_components
                        </a>
                    </strong>
                    ($each_component, $vce)

            </td>
            <td width="630" valign="top">

                    Checks that sub_components listed in recipe are allowed to
                    be created.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#as_content"
                        >
                            as_content
                        </a>
                    </strong>
                    ($each_component, $vce)

            </td>
            <td width="630" valign="top">

                    Adds HTML content that will be rendered on the page.
                    Omitting will cause errors in page build

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#as_content_finish"
                        >
                            as_content_finish
                        </a>
                    </strong>
                    ($each_component, $vce)

            </td>
            <td width="630" valign="top">

                    Book end of as_content.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#as_link"
                        >
                            as_link
                        </a>
                    </strong>
                    ($each_component, $vce) ***

            </td>
            <td width="630" valign="top">

                    Create a link to represent component on a page, links to
                    the component rendered content on a separate page

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#auto_created"
                        >
                            auto_created
                        </a>
                    </strong>
                    (new_component)

            </td>
            <td width="630" valign="top">

                    <strong>Protected</strong>
                    function, called after a component has been auto_created

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#build_sub_components"
                        >
                            build_sub_components
                        </a>
                    </strong>
                    ($each_component, $vce)

            </td>
            <td width="630" valign="top">

                    Check if page object should build sub_components for this
                    component

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#check_access"
                        >
                            check_access
                        </a>
                    </strong>
                    ($each_component, $vce)

            </td>
            <td width="630" valign="top">

                    Check to see if this component should be displayed.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#check_url"
                        >
                            checkurl
                        </a>
                    </strong>
                    ($input)

            </td>
            <td width="630" valign="top">

                    <strong>Protected</strong>
                    function

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#component_configuration"
                        >
                            component_configuration
                        </a>
                    </strong>
                    ( )

            </td>
            <td width="630" valign="top">

                    Creates unique configuration fields that appear on the
                    Manage Components page for this component.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#component_info"
                        >
                            component_info
                        </a>
                    </strong>
                    ( )

            </td>
            <td width="630" valign="top">

                    Returns an array with basic info about the component.
                    Omitting the basic properties will cause issues with your
                    component

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#create"
                        >
                            create
                        </a>
                    </strong>
                    ($input)

            </td>
            <td width="630" valign="top">

                    <strong>Protected</strong>
                    function, calls self::create_component method to create a
                    component and any associated auto-create components

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#create_component"
                        >
                            create_component
                        </a>
                    </strong>
                    ($input)

            </td>
            <td width="630" valign="top">

                    <strong>Protected</strong>
                    function, creates component by adding database records,
                    also creates any auto-create forward or reverse components
                    associated with this component

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#delete"
                        >
                            delete
                        </a>
                    </strong>
                    ($input)

            </td>
            <td width="630" valign="top">

                    <strong>Protected</strong>
                    function, calls delete_component method to delete all
                    traces of component from the system.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#delete_component"
                        >
                            delete_component
                        </a>
                    </strong>
                    ($input)

            </td>
            <td width="630" valign="top">

                    <strong>Protected</strong>
                    function, checks that we’re deleting correct component,
                    finds parent url, and calls extirpate to delete component,
                    its children, and all associated meta-data.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#disabled"
                        >
                            disabled
                        </a>
                    </strong>
                    ( )

            </td>
            <td width="630" valign="top">

                    Called when the component is disabled

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#edit_component"
                        >
                            edit_component
                        </a>
                    </strong>
                    ($each_component, $vce)

            </td>
            <td width="630" valign="top">

                    Create content to allow an end user to edit component
                    properties on a page.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#extirpate_component"
                        >
                            extirpate_component
                        </a>
                    </strong>
                    ($component_id)

            </td>
            <td width="630" valign="top">

                    <strong>Protected</strong>
                    function, deletes component, its children, and all
                    associated meta-data.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#find_sub_components"
                        >
                            find_sub_components
                        </a>
                    </strong>
                    ($requested_component, $vce, $components, $sub_components)

            </td>
            <td width="630" valign="top">

                    Determines if get_sub_components method should be called
                    for this component during Page Build

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#form_input"
                        >
                            form_input
                        </a>
                    </strong>
                    ($input)

            </td>
            <td width="630" valign="top">

                    Processes input from a form submission. Will decrypt the
                    dossier and route form data to the class/method indicated
                    in the dossier.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#installed"
                        >
                            installed
                        </a>
                    </strong>
                    ( )

            </td>
            <td width="630" valign="top">

                    Called when the component is installed

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#preload_component"
                        >
                            preload_component
                        </a>
                    </strong>
                    ( )

            </td>
            <td width="630" valign="top">

                    Called when component is pre-loaded during build process.
                    Can use to add your custom method to a system hook

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    Static
                    <strong>
                        <a
                            href="#recipe_components"
                        >
                            recipe_components
                        </a>
                    </strong>
                    ($each_component, $vce, $auto_create_reverse = null)

            </td>
            <td width="630" valign="top">

                    Goes through the recipe and creates the components.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#recipe_fields"
                        >
                            recipe_fields
                        </a>
                    </strong>
                    ($recipe)

            </td>
            <td width="630" valign="top">

                    Adds component fields used in ManageRecipes

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#recipe_manifestation"
                        >
                            recipe_manifestation
                        </a>
                    </strong>
                    ($each_recipe_component, $vce)

            </td>
            <td width="630" valign="top">

                    Allows for content to be displayed when component is
                    contained within the recipe, regardless if a component was
                    created.


                    This is a ghostly apparition of a sub recipe item.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#recipe_manifestation_finished"
                        >
                            recipe_manifestation_finish
                        </a>
                    </strong>
                    ($each_recipe_component, $vce)

            </td>
            <td width="630" valign="top">

                    Closes the content to be displayed when component is
                    contained within the recipe, regardless if a component was
                    created.


                    This is a ghostly apparition bookend for
                    recipe_manifestation and occures after sub_component item

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#revise_component"
                        >
                            revise_component
                        </a>
                    </strong>
                    ($each_component, $vce)

            </td>
            <td width="630" valign="top">

                    Creates dossiers that are used by the edit component form
                    on a page, then calls self::edit_component().

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#removed"
                        >
                            removed
                        </a>
                    </strong>
                    ( )

            </td>
            <td width="630" valign="top">

                    Called when the component is deleted

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#update"
                        >
                            update
                        </a>
                    </strong>
                    ($input)

            </td>
            <td width="630" valign="top">

                    <strong>Protected</strong>
                    function, Kicks off the process to update a component.

            </td>
        </tr>
        <tr>
            <td width="306" valign="top">

                    <strong>
                        <a
                            href="#update_component"
                        >
                            update_component
                        </a>
                    </strong>
                    ($input)

            </td>
            <td width="630" valign="top">

                    <strong>Protected</strong>
                    function, updates the component and data passed in the
                    $input array<strong></strong>

            </td>
        </tr>
    </tbody>
</table>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top" class="header_cell">
                    Method Details
            </td>
        </tr>
    </tbody>
</table>
<table border="1" cellspacing="0" cellpadding="0" id="activated">
    <tbody>
        <tr>
            <td width="935" valign="top" class="method_name">Activated        
            </td>
        </tr>
    </tbody>
</table>
<p>
    Method that is called when the component is activated. Method is empty in
    the base class and is meant to be overwritten. The activated() method is
    invoked when a component is activated using the Manage Components page
    included with the basic Nestor Install.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top" class="method_syntax">

                    activated()

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="162" valign="top">

                    No parameters

            </td>
            <td width="576" valign="top">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return values

            </td>
        </tr>
    </tbody>
</table>

 <h3>
    Example – Overwriting this method
</h3>
<p>In this example the method creates an empty index.php file, if it doesn’t
    already exist, when this component is activated.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top" class="codified">

                    public function activated() {<br>

                   &nbsp;&nbsp;$mpx_directory = 'mpx';<br>
                   &nbsp;&nbsp;$mpx_path = BASEPATH . $mpx_directory;<br>
                   &nbsp;&nbsp;if (!file_exists($mpx_path)) {<br>
                   &nbsp;&nbsp;&nbsp;&nbsp;mkdir($mpx_path);<br>
                   &nbsp;&nbsp;&nbsp;&nbsp;$content = "/* empty file */";<br>
                   &nbsp;&nbsp;&nbsp;&nbsp;$fp = fopen($mpx_path . "/index.php","wb");<br>
                   &nbsp;&nbsp;&nbsp;&nbsp;fwrite($fp,$content);<br>
                   &nbsp;&nbsp;&nbsp;&nbsp;fclose($fp);<br>
                   &nbsp;&nbsp;}<br>
                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>


<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="add_component"></a>
                    <a name="add_content">Add </a>
                    Component
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Create the HTML content that will be added to allow an end user to add a
    component of this type to the page.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    add_component ($each_recipe_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $each_recipe_component

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The recipe component for which you are creating content

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    $vce

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The global $vce object, passed for convenience

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return values

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
</h3>
 <h3>
    Example – Calling the function
</h3>
<p>
    add_component() is called from the Component recipe_components() method.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    this_component-&gt;add_component((object)
                    $each_recipe_component, $vce);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting this function
</h3>
<p>
    This example shows how to create and add a dossier to a form for
    submission. To learn more about dossiers and the form input/submission
    setup, visit the Form Submission section of this guide.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    // create dossier


                    $dossier_for_create =
                    $vce-&gt;page-&gt;generate_dossier($recipe_component-&gt;dossier);


                    // create dossier for checkurl functionality


                    $dossier = array(


                    'type' =&gt; $recipe_component-&gt;type,


                    'procedure' =&gt; 'checkurl'


                    );


                    // add dossier, which is an encrypted json object of
                    details uses in the form


                    $dossier_for_checkurl =
                    $vce-&gt;page-&gt;generate_dossier($dossier);


                    $content = &lt;&lt;&lt;EOF


                    &lt;div class="clickbar-container admin-container
                    add-container"&gt;


                    &lt;div class="clickbar-content"&gt;


                    &lt;form id="create_items" class="asynchronous-form"
                    method="post" action="$vce-&gt;page-&gt;input_path"
                    autocomplete="off"&gt;


                    &lt;input type="hidden" name="dossier"
                    value="$dossier_for_create"&gt;


                    &lt;label&gt;


                    &lt;input id="create-title" type="text" name="title"
                    tag="required" autocomplete="off"&gt;


                    &lt;div class="label-text"&gt;


                    &lt;div class="label-message"&gt;Name of
                    $recipe_component-&gt;title&lt;/div&gt;


                    &lt;div class="label-error"&gt;Enter a Title&lt;/div&gt;


                    &lt;/div&gt;


                    &lt;/label&gt;


                    &lt;label&gt;


                    &lt;input class="check-url" type="text" name="url" value=""
                    parent_url="$recipe_component-&gt;parent_url/"
                    dossier="$dossier_for_checkurl" tag="required"
                    autocomplete="off"&gt;


                    &lt;div class="label-text"&gt;


                    &lt;div class="label-message"&gt;URL&lt;/div&gt;


                    &lt;div class="label-error"&gt;Enter a URL&lt;/div&gt;


                    &lt;/div&gt;


                    &lt;/label&gt;


                    &lt;input type="submit" value="Create"&gt;


                    &lt;/form&gt;


                    &lt;/div&gt;


                    &lt;div class="clickbar-title
                    clickbar-closed"&gt;&lt;span&gt;Add A New
                    $recipe_component-&gt;title&lt;/span&gt;&lt;/div&gt;


                    &lt;/div&gt;


                    EOF;


                    $vce-&gt;content-&gt;add('main', $content);


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="add_component_finish">Add Component Finish</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Create the HTML content to bookend the add_component( ) content.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    add_component_finish ($each_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $each_recipe_component

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The recipe component for which you are creating content

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    $vce

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The global vce object, passed for convenience

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return values

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the function
</h3>
<p>
    Add_component_finish() is called from the Page build_content() method, near
    the end of each component processing cycle.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    // call book end for recipe_components, similar to
                    as_content_finish


                    $previous_component-&gt;add_component_finish($each_component,
                    $this);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the function
</h3>
<p>
    In the Comments component, if there are exiting comments at this level,
    then "Add Comments" would be placed under comments.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public function add_component_finish($each_component, $vce)
                    {


                    // check for special property main_*parent_id*


                    $add_component = 'main_' .
                    $each_component-&gt;component_id;


                    if (!empty($vce-&gt;content-&gt;$add_component)) {


                    $ vce-&gt;content-&gt;add('main',
                    $vce-&gt;content-&gt;$add_component);


                    }


                    }

            </td>
        </tr>
    </tbody>
</table>

<table border="1" cellspacing="0" cellpadding="0" id="allow_sub_components">
    <tbody>
        <tr>
            <td width="935" valign="top" class="method_name">Allow Sub Components                
            </td>
        </tr>
    </tbody>
</table>
<p>
    Checks that sub_components listed in recipe are allowed to be created.
    Called during the Page Build process to see if
    <a href="#recipe_components">recipe_components</a> should be called for the component being processed.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top" class="method_syntax">

                    allow_sub_components($each_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="200" valign="top">

                    $each_component

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="575" valign="top">

                    A component that can be used to generate content.
                    Generally, this is the component currently being processed
                    by $page during the Page Build process. It originates from
                    the page component array.

            </td>
        </tr>
        <tr>
            <td width="200" valign="top">

                    $vce

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="575" valign="top">

                    The global $vce object, passed for convenience.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    Return true if sub_components under $each component can be
                    built out, false if they should not be built out. Returns
                    true by default.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Calling the method
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top" class="codified">
                 if ($this_component-&gt;allow_sub_components($each_component,
                    $vce)) {<br>
                    &nbsp;&nbsp;$this_component-&gt;recipe_components($each_component,
                    $vce);<br>
                    }
            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the method
</h3>
<p>
    In this example, the component has set a limit of how many sub_components
    can be rendered. When this number is reached, allow_sub_components returns
    false.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top" class="codified">
                public function allow_sub_components($each_component, $vce){<br>
                    &nbsp;&nbsp;if (isset($each_component-&gt;components) &amp;&amp; isset($each_component-&gt;components_limit)) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;if (count($each_component-&gt;components) &gt;= $each_component-&gt;components_limit) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;return true;<br>
                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="as_content">As Content</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Allows you to add HTML content to the page. This method must contain code
    to add your content to the global $content object. as_content( ) is called
    during the page build process, so is a critical function for your custom
    component. Removing this function from your class file will cause errors.
    Also, if the method returns false, the page build process will be halted
    after outputting the content added to the global $content object by this
    method.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    as_content ($each_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $each_component

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    A component that can be used to generate content.
                    Generally, this is the component currently being processed
                    by $page during the Page Build process. It originates from
                    the page component array.

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    $vce

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The global $vce object, passed for convenience. Can be used
                    to access the global $content object.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    boolean

            </td>
            <td width="738" valign="top">

                    Only use if you want to stop the page build process, in
                    which case return false. By default no return.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling this method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    //if user has permission to view content, display component
                    content


                    if ($this_component-&gt;check_access($each_component,
                    $vce)) {


                    $as_content =
                    $this_component-&gt;as_content($each_component, $vce);


                    }

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Overwriting this method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public function as_content($each_component, $vce) {


                    $my_content = "Blog-o-rama says hello!";


                    $vce-&gt;content-&gt;add('main', "My content: " .
                    $my_content);


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="as_content_finish">As Content Finish</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Allows you to add “bookend” HTML content to the page. This is called near
    the end of the build_content( ) method in Page, and provides a way to add
    content after recipe components are created.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    as_content_finish ($each_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $each_component

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    A component that can be used to generate content.
                    Generally, this is the component currently being processed
                    by $page during the Page Build process. It originates from
                    the page component array.

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    $vce

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The global $vce object, passed for convenience. Can be used
                    to access the global $content object.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return value by default

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling this method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $this_component-&gt;as_content_finish($each_component,
                    $vce);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Overwriting this method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public function as_content_finish($each_component, $vce) {


                    $vce-&gt;content-&gt;add('main','&lt;/div&gt;');


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="as_link">As Link</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Create a link to represent component on a page, links to the component
    rendered content on a separate page. Then adds this link to the content
    object for page rendering. This can happen in a Recipe with nested URLs –
    this component has an associated URL but a previous component with a URL
    was the requested id.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    as_link($each_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $each_component

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    Instance of component for which you are generating an HTML
                    link

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    Return false if…

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the Method
</h3>
<p>
    While building content for the page, the $page object checks each component
    in the hierarchy after the requested component. If a subordinate component
    has its own URL, $page generates a link to this component’s page instead of
    rendering its content.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $this_component-&gt;as_link($each_component, $vce);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    The default method in Component generates a simple HTML link. You could
    overwrite this to provide more information, add a graphic, or customize as
    you wish.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public function as_link($each_component, $vce) {


                    $title = “Click here for a really cool page”;


                    $vce-&gt;content-&gt;main .= '&lt;div
                    class="items-link"&gt;


                    &lt;a href="' . $vce-&gt;site-&gt;site_url . '/' .


                    $each_component-&gt;url . '"&gt;' . $title .
                    '&lt;/a&gt;&lt;/div&gt;' . PHP_EOL;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="auto_created">Auto Created</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    This function is called after a component has been auto-created. Empty in
    parent Component class, meant to be overwritten. Is called in the
    $auto_create_components anonymous function within the
    <a
        href="#create_component"
    >
        create_component
    </a>
    method, after the auto-create component is created.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    auto_created($new_component)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $new_component

            </td>
            <td width="162" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    Array containing properties of component which has been
                    created.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return values by default

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the Method
</h3>
<p>
    When components are auto-created in the create_component method,
    auto-created is called from the Class type of the component that has been
    created.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $new_component['type']::auto_created($new_component)

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="build_sub_components">Build Sub Components</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Check if page object should build sub_components for this component during
    the Page Build Process. Building involves creating and displaying content.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    <a
                        href="#build_sub_components"
                    >
                        build_sub_components
                    </a>
                    <strong> </strong>
                    ($each_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $each_component

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    A component that can be used to generate content.
                    Generally, this is the component currently being processed
                    by $page during the Page Build process. It originates from
                    the page component array.

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    $vce

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The global $vce object, passed for convenience.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    Return true if sub_components under $each component can be
                    built out, false if they should not be built out. Returns
                    true by default.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    /* Called in Page class, in the build_content() method.
                    Determines if


                    ** recursive calls should be made to build out
                    sub-components for the


                    ** current component


                    */


                    if
                    ($this_component-&gt;build_sub_components($each_component,
                    $vce)) {


                    // recursive call for sub component


                    self::build_content($sub_components, $recipe,
                    $requested_id, $linked,


                    $recipe_tracker);


                    }

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    // only show sub-components if current user created the
                    component, meaning


                    // they added it to the page


                    public function build_sub_components($each_component, $vce)
                    {


                    if ($each_component-&gt;created_by ==
                    $vce-&gt;user-&gt;user_id) {


                    return true;


                    }


                    return false;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="check_access">Check Access</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Checks to see if this component should be displayed. This is fired within
    class.page.php in build_content(). Also, if you would like to add something
    to the $page object that can be used by sub_components, this would be where
    to add that sort of thing $vce-&gt;page-&gt;key = "value".
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    check_access($each_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $each_component

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The current component being processed by Page

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    $vce

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    Global $vce object, passed for convenience

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    Returns true by default. If this function returns false,
                    content will not be built for this component

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Calling the method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    //if a component’s check_access() returns true, then
                    display content


                    if ($this_component-&gt;check_access($each_component, $vce)
                    {


                    $as_content =
                    $this_component-&gt;as_content($each_component, $vce);


                    }

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    //check that user has role that will allow access


                    public function check_access($each_component, $vce) {


                    global $user;


                    if (isset($user-&gt;role_id)) {


                    // check if user_id is in role_access


                    if (!in_array($user-&gt;role_id,


                    explode('|',$each_component-&gt;role_access))) {


                    return false;


                    }


                    } else {


                    // no user role.


                    if (count($each_component-&gt;role_access)) {


                    return false;


                    }


                    }


                    return true;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="check_url">Check URL</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Description
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    syntax

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Name

            </td>
            <td width="162" valign="top">

                    Datatype

            </td>
            <td width="576" valign="top">

                    desc

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Datatype

            </td>
            <td width="738" valign="top">

                    desc

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Return array
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="158" valign="top">
            </td>
            <td width="104" valign="top">

                    Datatype

            </td>
            <td width="674" valign="top">

                    desc

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="158" valign="top">
            </td>
            <td width="104" valign="top">

                    Array

            </td>
            <td width="674" valign="top">

                    Array desc

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="936" colspan="4" valign="top">

                    Members of the returned array

            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    Name

            </td>
            <td width="104" valign="top">

                    Datatype

            </td>
            <td width="674" valign="top">

                    desc

            </td>
            <td width="1">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Hooks
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    Hook name and Description of Hook

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    example

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="component_configuration">
                        Component Configuration
                    </a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Creates unique configuration fields that appear on the Manage Components
    page for this component. When this method is left in the default state of
    returning false, the component will not be available to add to a recipe.
    The parent Component method is empty so this method will need to be fleshed
    for any custom component that you want to be configurable in Manage
    Components.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    component_configuration()

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No default parameters

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    Returns false by default, which will prevent
                    ManageComponents from adding the configuration element to
                    this component


                    (prevent a component from being available to add to a
                    recipe)

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    String

            </td>
            <td width="738" valign="top">

                    Returns HTML content to create unique configuration fields
                    for this component

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling this Method
</h3>
<p>
    When ManageComponents builds out the Manage Components page, it looks at
    each component and checks if the component is active and if it returns
    anything besides false from component_configuration. If content is
    returned, that content is added to an expandable configuration area that
    contains these unique configuration fields.
</p>
<p>
    Notice that this code block creates a dossier called
    “$dossier_for_configure”. When this form is submitted, this dossier routes
    the submitted data to a method called “configure” in the ManageComponents
    class. This method encrypts a json-encoded string that represents all
    input, and inserts this into the [<span class="italic">your_db</span>]_site_meta table.
</p>
<p>
    Refer to the
    <a
        href="#form_submission"
    >
        Form Submission section
    </a>
    for more information.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    if (isset($activated_components[$type]) &amp;&amp;


                    $fields = $current_component-&gt;component_configuration())
                    {


                    $dossier_for_configure =


                    $vce-&gt;user-&gt;encryption(json_encode(array('type' =&gt;


                    'ManageComponents','procedure' =&gt; 'configure',


                    'component' =&gt;
                    $type)),$vce-&gt;user-&gt;session_vector);


                    $content .= &lt;&lt;&lt;EOF


                    &lt;div class="clickbar-container"&gt;


                    &lt;div class="clickbar-content"&gt;


                    &lt;form id="$type-configuration"
                    class="configure-component" method="post" action="$
                    vce-&gt;page-&gt;input_path" autocomplete="off"&gt;


                    &lt;input type="hidden" name="dossier"
                    value="$dossier_for_configure"&gt;


                    EOF;


                    $content .= $fields;


                    $content .= &lt;&lt;&lt;EOF


                    &lt;input type="submit" value="Save"&gt;


                    &lt;/form&gt;


                    &lt;/div&gt;


                    &lt;div class="clickbar-title
                    clickbar-closed"&gt;&lt;span&gt;Configure&lt;/span&gt;&lt;/div&gt;


                    &lt;/div&gt;


                    EOF;


                    }

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting this Method
</h3>
<p>
    The Blog-o-rama component has code to add configuration elements to allow a
    user to submit an author alias. This example receives data from the user
    but doesn’t display any previously submitted data. Note it doesn’t
    associate data with a specific user.
</p>
<p>
    On submission, the configure() method in the ManageComponents class
    encrypts a json-encoded string that represents all field input, and inserts
    this into the [<span class="italic">your_db</span>]_site_meta table. You would need to
    retrieve and decrypt this string and use it in this method to reflect any
    user-submitted data.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public function component_configuration() {


                    global $vce;


                    $author_alias = $vce-&gt;user-&gt;first_name;


                    $elements = &lt;&lt;&lt;EOF


                    &lt;label&gt;


                    &lt;input type="text" name="author_alias"
                    value="$author_alias" autocomplete="off"&gt;


                    &lt;div class="label-text"&gt;


                    &lt;div class="label-message"&gt;Author Alias&lt;/div&gt;


                    &lt;div class="label-error"&gt;Enter Your Author
                    Alias&lt;/div&gt;


                    &lt;/div&gt;


                    &lt;/label&gt;


                    EOF;


                    return $elements;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="component_info">Component Info</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Returns an array with basic info about the component. This array has an
    optional array of permissions - see the Site Roles section in the Site
    Class API for more information about how these are set and used in the
    Nestor system. You can extend this method to add custom properties to your
    component by adding key/value pairs to the return array.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    component_info()

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="162" valign="top">

                    No parameters

            </td>
            <td width="576" valign="top">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return array
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="158" valign="top">
            </td>
            <td width="112" valign="top">

                    Array

            </td>
            <td width="665" colspan="2" valign="top">

                    Contains basic info about the component

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="936" colspan="5" valign="top">

                    Potential members of the returned array

            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    name

            </td>
            <td width="112" valign="top">

                    String

            </td>
            <td width="665" colspan="2" valign="top">

                    Name of the Component

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    description

            </td>
            <td width="112" valign="top">

                    String

            </td>
            <td width="665" colspan="2" valign="top">

                    Description of the Component

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    category

            </td>
            <td width="112" valign="top">

                    String

            </td>
            <td width="665" colspan="2" valign="top">

                    Component category in which the Component belongs. This can
                    be used to filter views of the components; an example is
                    the Manage Components Page installed with Nestor.

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    [key]

            </td>
            <td width="112" valign="top">

                    String

            </td>
            <td width="665" colspan="2" valign="top">

                    Any key/value pairs that you add to the return array to
                    customize your component

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    permissions

            </td>
            <td width="112" valign="top">

                    Array


                    (Optional)

            </td>
            <td width="665" colspan="2" valign="top">

                    Assigns unique permissions to Site roles; these permissions
                    will be defined in and used by your Component.

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="936" colspan="5">

                    Values set in component info permissions array

            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    name

            </td>
            <td width="121" colspan="2" valign="top">

                    String

            </td>
            <td width="657" colspan="2" valign="top">

                    Name of the unique permission

            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    description

            </td>
            <td width="121" colspan="2" valign="top">

                    String

            </td>
            <td width="657" colspan="2" valign="top">

                    Description of how this permission is used

            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    type

            </td>
            <td width="121" colspan="2" valign="top">

                    String


                    (Optional)

            </td>
            <td width="657" colspan="2" valign="top">

                    If set to ‘singular’, role options will be shown as radio
                    buttons. If not set to ‘singular’, options will have check
                    boxes.

            </td>
        </tr>
        <tr>
            <td width="158" valign="top">
            </td>
            <td width="112" valign="top">
            </td>
            <td width="665" colspan="2" valign="top">
            </td>
            <td width="1">
            </td>
        </tr>
        <tr height="0">
            <td width="149">
            </td>
            <td width="119">
            </td>
            <td width="7">
            </td>
            <td width="433">
            </td>
            <td width="1">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    //return and display component info from the current class


                    //alter return array in component_info()


                    public function component_info() {


                    return array(


                    'name' =&gt; 'Blog-o-rama',


                    'description' =&gt; 'Create and display blog posts and
                    comments',


                    'category' =&gt; 'blog',


                    'permissions' =&gt; array(


                    array(


                    'name' =&gt; 'Read',


                    'description' =&gt; 'Can read posts'


                    ),


                    array(


                    'name' =&gt; 'Write',


                    'description' =&gt; 'Can add and update posts'


                    ),


                    array(


                    'name' =&gt; 'Delete',


                    'description' =&gt; 'Can delete posts'


                    )


                    )


                    );


                    }


                    //call component_info() from as_content() function of the
                    same class


                    public function as_content($each_component, $vce) {


                    $my_content = $this-&gt;component_info();


                    $vce-&gt;content-&gt;add('main', "My content: " .


                    var_dump($my_content));


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="create">Create</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Kicks off the process to create a component. Receives component info and
    calls to create_component method to have database records created for the
    component. Is called asynchronously when a new component is added to a
    page, and the component’s form has a dossier with ‘procedure’ set to
    ‘create’. Adds a site attribute with a message that the specified component
    was created.
</p>
<p>
    This is a good function to customize if there is something extra you’d like
    done when your component is added to a page, such as adding a hook to fire
    each time a component of this type is created.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    create($input)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $input

            </td>
            <td width="162" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    Array that contains properties of new component that will
                    be created

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" valign="top">

                    Potential members of the $input array

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    title

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    Title if it’s set in $input, type if it’s not set

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    parent_id

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    ID of parent, if it’s not set in $input this will be set to
                    ‘0’

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    auto_create

            </td>
            <td width="162" valign="top">

                    array (optional)

            </td>
            <td width="576" valign="top">

                    Array of components which can be auto-created

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    url

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    url associated with the component, if set in $input will be
                    cleaned by url_checker method

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    type

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

                    Class type of component

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    sequence

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    Order in which this component will be rendered on the page,
                    will be set to 1 if not set in $input

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    [<span class="italic">key</span>]

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

Any other key/value pairs added to input will be added to [                    <span class="italic">your_db</span>]_components_meta

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="162" valign="top">
            </td>
            <td width="576" valign="top">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    Echos success or failure message

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Calling the method<strong></strong>
</h3>
<p>
    The create method is not normally called verbatim in PHP code, but instead
    is triggered when the procedure value in a dossier is set to ‘create’, and
    a form with this dossier is submitted from a page. See the
    <a
        href="#form_input"
    >
        Form Input
    </a>
    section for more details.
</p>
 <h3>
    Example – Overwriting the method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    protected function create($input) {


                    // media_create_component


                    if (isset($site-&gt;hooks['media_create_component'])) {


                    foreach($site-&gt;hooks['media_create_component'] as $hook)
                    {


                    $input = call_user_func($hook, $input);


                    }


                    }


                    $component_id = self::create_component($input);


                    echo json_encode(array('response' =&gt;
                    'success','procedure' =&gt;


                    'create','action' =&gt; 'reload',


                    'message' =&gt; 'New Component Was Created'));


                    return;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="create_component">Create Component</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Called by Component create method. Receives an array of properties and uses
    these properties to create records in the database. Add created_by and
    created_at properties, using current user ID and timestamp.
</p>
<p>
    Creates a new component in [<span class="italic">your_db</span>]_components table using
parent_id, sequence, and url. Adds any other data as key/value pairs to [    <span class="italic">your_db</span>]_components_meta table.
</p>
<p>
    Will create the new component specified, then look through the recipe for
    any components with auto_create set and will create those according to
    their setting – ‘forward’ or ‘reverse’. Auto_create array is built and
    added to the dossier by the recipe_component method during page build.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    create_component($input)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $input

            </td>
            <td width="162" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    Array that contains properties of new component that will
                    be created

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" valign="top">

                    Potential members of the $input array

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    title

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    Title if it’s set in $input, type if it’s not set

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    parent_id

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    ID of parent, if it’s not set in $input this will be set to
                    ‘0’

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    auto_create

            </td>
            <td width="162" valign="top">

                    array (optional)

            </td>
            <td width="576" valign="top">

                    Array of components which can be auto-created

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    url

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    url associated with the component, if set in $input will be
                    cleaned by url_checker method

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    type

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

                    Class type of component

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    sequence

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    Order in which this component will be rendered on the page,
                    will be set to 1 if not set in $input

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    [<span class="italic">key</span>]

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

Any other key/value pairs added to input will be added to [                    <span class="italic">your_db</span>]_components_meta

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Int

            </td>
            <td width="738" valign="top">

                    ID of new component

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
</h3>
 <h3>
    Hooks
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    create_component_before invoked before component is
                    created, receives and returns altered $input array

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the Method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $component_id = self::create_component($input);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    This method is fleshed out in the parent Component Class, and we don’t
    recommend overwriting it. If you need to customize the component creation
    process, use the
    <a
        href="#create"
    >
        create method
    </a>
    or add a create_component_before hook.
</p>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="delete">Delete</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Kicks off the process to delete a component. Calls delete_component method
    to delete all traces of component from the system. Is called asynchronously
    when a user chooses to remove a component from a page, and submits a
    component form with a dossier with ‘procedure’ set to ‘delete’. Adds a site
    attribute with a message that the specified component was deleted.
</p>
<p>
    This is a good function to customize if there is something extra you’d like
    done when your component is deleted from a page, such as adding a hook to
    fire each time a component of this type is deleted.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    delete($input)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $input

            </td>
            <td width="162" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    Array that contains properties of component to delete

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" valign="top">

                    Potential members of the $input array

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    component_id

            </td>
            <td width="162" valign="top">

                    Int

            </td>
            <td width="576" valign="top">

                    ID of component to be deleted

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    parent_url

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    url associated with top level parent of the recipe/page
                    this component belongs to.

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    created_at

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

                    Timestamp of when component was created.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    Echos success or failure message

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Calling the method<strong></strong>
</h3>
<p>
    The delete method is not normally called verbatim in PHP code, but instead
    is triggered when the procedure value in a dossier is set to ‘delete’, and
    a form with this dossier is submitted from a page. See the
    <a
        href="#form_input"
    >
        Form Input
    </a>
    section for more details.
</p>
 <h3>
    Example – Overwriting the method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    protected function delete($input) {


                    global $site;


                    // media_delete_component


                    if (isset($site-&gt;hooks['media_delete_component'])) {


                    foreach($site-&gt;hooks['media_delete_component'] as $hook)
                    {


                    $input = call_user_func($hook, $input);


                    }


                    }


                    $parent_url = self::delete_component($input);


                    if (isset($parent_url)) {


                    echo json_encode(array('response' =&gt; 'success',


                    'procedure' =&gt; 'delete','action' =&gt; 'reload',


                    'url' =&gt; $parent_url, 'message' =&gt; "Deleted"));


                    return;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="delete_component">Delete Component</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Checks that certain values are present in $input to get component ready for
    deletion. If no component_id is set, echos an error message and then
    returns. If parent_url is not set, calls an anonymous function recursively
    to find the url associated with top level parent of the recipe/page this
    component belongs to. Check that $input[‘created_at’] matches the value in
    the database associated with the component ID as a security check to make
    sure we are deleting the correct component. Call extirpate_component method
    if all checks pass.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    delete($input)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $input

            </td>
            <td width="162" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    Array that contains properties of component to delete

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" valign="top">

                    Potential members of the $input array

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    component_id

            </td>
            <td width="162" valign="top">

                    Int

            </td>
            <td width="576" valign="top">

                    ID of component to be deleted

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    parent_url

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    url associated with top level parent of the recipe/page
                    this component belongs to.

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    created_at

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

                    Timestamp of when component was created.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    String

            </td>
            <td width="738" valign="top">

                    url associated with top level parent of the recipe/page
                    this component belongs to.

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    Returns with error message if no component ID

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    Returns false if $input[‘created_at’] and database value
                    for ‘created_at’ don’t match (and function hasn’t already
                    returned)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $parent_url = self::delete_component($input);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    This method is fleshed out in the parent Component Class, and we don’t
    recommend overwriting it. If you need to customize the component deletion
    process, use the
    <a
        href="#delete"
    >
        delete method
    </a>
    .
</p>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="disabled">Disabled</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Method that is called when the component is disabled. Method is empty in
    the base class and is meant to be overwritten. The disabled() method is
    invoked when a component is disabled using the Manage Components page
    included with the basic Nestor Install.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    disabled()

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="162" valign="top">

                    No parameters

            </td>
            <td width="576" valign="top">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return values

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the function
</h3>
<p>
    When a component is marked disabled in ManageComponents, it goes through
    and calls the disabled function of the component.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    foreach ($disable_items as $type=&gt;$path) {


                    // load class


                    require_once(BASEPATH . $path);


                    $disabled = new $type();


                    // fire installed function


                    $disabled-&gt;disabled();


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="edit_component">Edit Component</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Creates the HTML that allows the end user to edit or delete the component
    on a page. Is called during Page build process from build_content( ). The
    parent Component method is empty so this method will need to be fleshed for
    any custom component that you want to be editable by an end user.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    edit_component ($each_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="288" valign="top">

                    $each_recipe_component

            </td>
            <td width="150" valign="top">

                    Object

            </td>
            <td width="498" valign="top">

                    The recipe component for which you are creating content

            </td>
        </tr>
        <tr>
            <td width="288" valign="top">

                    $vce

            </td>
            <td width="150" valign="top">

                    Object

            </td>
            <td width="498" valign="top">

                    The global vce object, passed for convenience

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Datatype

            </td>
            <td width="738" valign="top">

                    desc

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the Method
</h3>
<p>
    Page::build content( ) checks that the component is allowed to be edited,
    then calls the component’s edit_component( ) method.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    if (!isset($each_component-&gt;prevent_editing) ||


                    $each_component-&gt;prevent_editing === false) {


                    $this_component-&gt;edit_component($each_component, $this);


                    }

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    In order to function, this method should:
</p>
<p>
    1) Call $vce-&gt;page-&gt;can_edit() to make sure user has permissions to
    edit the component
</p>
<p>
    2) Generate dossiers for edit and delete
</p>
<p>
    3) Build HTML content to allow a user to edit properties of the component
    on a page. The content should encapsulate a form submission element that
    contains the component dossiers as properties.
</p>
<p>
    4) Add generated HTML content to the global $content object
</p>
<p>
    Refer to the
    <a
        href="#form_submission"
    >
        Form Submission section
    </a>
    for more information about submitting and receiving form data in the Nestor
    system.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public function edit_component($each_component, $page) {


                    if ($vce-&gt;page-&gt;can_edit($each_component)) {


                    // the instructions to pass through the form


                    $dossier = array(


                    'type' =&gt; $each_component-&gt;type,


                    'procedure' =&gt; 'update',


                    'component_id' =&gt; $each_component-&gt;component_id,


                    'created_at' =&gt; $each_component-&gt;created_at


                    );


                    // generate dossier


                    $dossier_for_update = $
                    vce-&gt;page-&gt;generate_dossier($dossier);


                    $content = &lt;&lt;&lt;EOF


                    &lt;div class="clickbar-container admin-container
                    edit-container"&gt;


                    &lt;div class="clickbar-content"&gt;


                    &lt;form id="update_$each_component-&gt;component_id"
                    class="asynchronous-form" method="post" action="$
                    vce-&gt;page-&gt;input_path" autocomplete="off"&gt;


                    &lt;input type="hidden" name="dossier"
                    value="$dossier_for_update"&gt;


                    &lt;label&gt;


                    &lt;input type="text" name="title"
                    value="$each_component-&gt;title" tag="required"
                    autocomplete="off"&gt;


                    &lt;div class="label-text"&gt;


                    &lt;div class="label-message"&gt;Title&lt;/div&gt;


                    &lt;div class="label-error"&gt;Enter a Title&lt;/div&gt;


                    &lt;/div&gt;


                    &lt;/label&gt;


                    &lt;label&gt;


                    &lt;input type="text" name="url"
                    value="$each_component-&gt;url"
                    dossier="$dossier_for_checkurl" autocomplete="off"&gt;


                    &lt;div class="label-text"&gt;


                    &lt;div class="label-message"&gt;URL&lt;/div&gt;


                    &lt;div class="label-error"&gt;Enter a URL&lt;/div&gt;


                    &lt;/div&gt;


                    &lt;/label&gt;


                    &lt;label&gt;


                    &lt;input type="text" name="sequence"
                    value="$each_component-&gt;sequence"&gt;


                    &lt;div class="label-text"&gt;


                    &lt;div class="label-message"&gt;Order Number&lt;/div&gt;


                    &lt;div class="label-error"&gt;Enter an Order
                    Number&lt;/div&gt;


                    &lt;/div&gt;


                    &lt;/label&gt;


                    &lt;input type="submit" value="Update"&gt;


                    &lt;/form&gt;


                    EOF;


                    if ($page-&gt;can_delete($each_component)) {


                    // the instructions to pass through the form


                    $dossier = array(


                    'type' =&gt; $each_component-&gt;type,


                    'procedure' =&gt; 'delete',


                    'component_id' =&gt; $each_component-&gt;component_id,


                    'created_at' =&gt; $each_component-&gt;created_at


                    );


                    // generate dossier


                    $dossier_for_delete = $
                    vce-&gt;page-&gt;generate_dossier($dossier);


                    $content .= &lt;&lt;&lt;EOF


                    &lt;form id="delete_$each_component-&gt;component_id"
                    class="delete-form float-right-form asynchronous-form"
                    method="post"


                    action="$vce-&gt;page-&gt;input_path"&gt;


                    &lt;input type="hidden" name="dossier"
                    value="$dossier_for_delete"&gt;


                    &lt;input type="submit" value="Delete"&gt;


                    &lt;/form&gt;


                    EOF;


                    }


                    $content .= &lt;&lt;&lt;EOF


                    &lt;/div&gt;


                    &lt;div class="clickbar-title
                    clickbar-closed"&gt;&lt;span&gt;Edit
                    $each_component-&gt;title&lt;/span&gt;&lt;/div&gt;


                    &lt;/div&gt;


                    EOF;


                    $ vce-&gt;page-&gt;content-&gt;add('admin', $content);


                    }


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="extirpate_component">Extirpate Component</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Takes component ID and searches for all children. For the component and
    then for each of its children - looks for and deletes any related
    media/files and any datalists. Deletes the component and then recursively
    calls extirpate_component for each child. Note that each child could
    potential have its own children, each of these would also be extirpated
    recursively.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    extirpate_component($component_id)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    component_id

            </td>
            <td width="162" valign="top">

                    Int

            </td>
            <td width="576" valign="top">

                    ID of component to be obliterated from the system

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return value

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Hooks
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    delete_extirpate_component called before component and it’s
                    children are deleted. Receives component ID and array of
                    children component IDs, and returns altered $components
                    array.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the Method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    self::extirpate_component($input['component_id']);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    This method is fleshed out in the parent Component Class, and we don’t
    recommend overwriting it. If you need to customize the component deletion
    process, use the
    <a
        href="#delete"
    >
        delete method.
    </a>
</p>

<p><a href="#methods">Back to Top</a>

<p>
    <u></u>
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="find_sub_components">Find Sub Components</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    This method is called by the Page object during the page build process. It
    checks if the Page get_sub_components method should be called for this
    component, and is checked in both get_components and get_sub_components,
    which is why both variables are available. The return value is set to true
    by default, but can be set to false if there is a reason you wouldn’t want
    to build out the full component tree under your component.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public function find_sub_components($requested_component,
                    $vce, $components, $sub_components)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="252" valign="top">

                    $requested_component

            </td>
            <td width="108" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The requested component is the component that $page has
                    identified either by the requested URL path, or by a
                    component ID supplied on a querystring. This component will
                    contain the Recipe that the $page uses to render the page
                    content.

            </td>
        </tr>
        <tr>
            <td width="252" valign="top">

                    $vce

            </td>
            <td width="108" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The global $vce object, passed for convenience

            </td>
        </tr>
        <tr>
            <td width="252" valign="top">

                    $components

            </td>
            <td width="108" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    The $components array being built by the $page process. At
                    the point that it’s passed into this function, it will
                    contain the requested component and any components upstream
                    in the recipe inclusive of its branch, but not necessarily
                    other branches.

            </td>
        </tr>
        <tr>
            <td width="252" valign="top">

                    $sub_components

            </td>
            <td width="108" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    The $sub_components array being built by the $page process.
                    At the point that it’s passed into this function, it will
                    contain the requested component and any components upstream
                    in the recipe inclusive of its branch, but not necessarily
                    other branches.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    Returns true by default

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    //call from the global $page object from get_components
                    method


                    $find_sub_components =
                    $current_component-&gt;find_sub_components


                    ($requested_component, $this, $components, $sub_components
                    =


                    array());


                    if ($find_sub_components) {


                    // get sub-components


                    $nested_components =
                    self::get_sub_components($requested_id,


                    $requested_id, $components);


                    // add sub_components to components list


                    $components[(count($components)-1)]-&gt;components =
                    $nested_components;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<p>
    <u></u>
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="form_input">Form Input</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Processes input from a form submission. Will decrypt the dossier and route
    form data to the class/method indicated in the dossier. Your component will
    need to contain a method that processes the data.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    form_input($input)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $input

            </td>
            <td width="162" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    Contains key/value pairs representing the form data
                    submitted, and the dossier data.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No values returned, will echo an error if method is not
                    known

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the Method
</h3>
<p>
    The Input component catches any form submissions and then routes the data
    to form_input( ) method of the class and method indicated in the dossier.
    If the class/method don’t exist, will default to the parent Component class
    method.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    if (method_exists($this_component,'form_input')) {


                    $this_component-&gt;form_input($input);


                    } else {


                    // default to Component


                    $this_component = new Component;


                    $this_component-&gt;form_input($input);


                    }

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    Parent Component class has a fully fleshed out form_input( ) method that
    really shouldn’t be overwritten. It will route the data to the class and
    method indicated in the dossier submitted with the form.
</p>

<p><a href="#methods">Back to Top</a>

<p>
    <u></u>
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="installed">Installed</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Method that is called when the component is installed. Method is empty in
    the base class and is meant to be overwritten. The installed() method is
    invoked when a component is installed using the Manage Components page
    included with the basic Nestor Install. If your component will need to add
    anything into the system, such as Roles or datalists, this would be a good
    place to add them.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    installed()

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="162" valign="top">

                    No parameters

            </td>
            <td width="576" valign="top">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return values

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    example

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="preload_component">Preload Component</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Method that is called when the component is pre-loaded during the page
    build process. This is where you would add definitions for any hooks you
    want to invoke. A hook tells the Nestor core engine to call a method in
    this Component at a defined time. See the Hooks section for information
    about where and when specific hooks are invoked. Can also fire stuff off,
    before page object is built. Could use for logging, change theme based on
    the site role, redirect URL for temp site maintenance.
</p>
<p>
    When this method returns false, it is informing the system that it does not
    want to add any hooks into the system.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    preload_component()

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="162" valign="top">

                    No parameters

            </td>
            <td width="576" valign="top">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="158" valign="top">
            </td>
            <td width="104" valign="top">

                    Boolean

            </td>
            <td width="673" valign="top">

                    Returns false by default, which indicates that this
                    component is not adding any hooks into the system.

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="158" valign="top">
            </td>
            <td width="104" valign="top">

                    Array

            </td>
            <td width="673" valign="top">

                    Contains arrays which define each individual hook to add.


                    When this component is installed by Manage Components, if
                    this method does not return false this component is added
                    to the preloaded_components list in the [<span class="italic">your_db</span>
                    ]_site_meta table. This tells the $site object to call this
                    component during the page build process, and it’s hooks are
                    loaded into the $site-&gt;hooks array.

            </td>
            <td width="1">
            </td>
        </tr>
        <tr>
            <td width="936" colspan="4" valign="top">

                    Members of the returned array

            </td>
        </tr>
        <tr>
            <td width="158" valign="top">

                    [hook name]

            </td>
            <td width="104" valign="top">

                    String

            </td>
            <td width="673" valign="top">

                    The value should be the Class name and method that this
                    hook will call, formatted in this manner:
                    [Class_Name]::[Method_Name]


                    The method must be in the Class indicated, or the system
                    will throw an error. The hook name must be an existing hook
                    that is called somewhere in the system. See the Hooks
                    section for a list of existing hooks used by the core
                    engine.

            </td>
            <td width="1">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    /**


                    * add a hook that fires at initiation of site hooks


                    */


                    public function preload_component() {


                    $content_hook = array (


                    'site_hook_initiation' =&gt;
                    'Media::require_once_mediatype'


                    );


                    return $content_hook;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="recipe_components">Recipe Components</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Called from Page::build_content( ), goes through the recipe and creates
    components. Instantiates each component, then checks if user can add this
    component to a page. If so, creates dossiers for the component that are
    used for form submissions. Calls add_content( ) which adds content that
    will allow users to add, update, or delete this component on a page. Also
    will call recipe_manifestation() to show a representation of the component
    even if component has not yet been created, which can be useful for testing
    your component.
</p>
<p>
    Recipe Components uses the concepts of auto_create forward/reverse to
    determine if components before or after the current component in the
    hierarchy should be automatically created. For example:
</p>
<p>
    component_2 has auto_create = forward
</p>
<p>
    component_1
</p>
<p>
    - component_2
</p>
<p>
    When you create component_1, component_2 will be automatically created.
    Used a lot, like when using Access.
</p>
<p>
    - - - - - - - - - -
</p>
<p>
    component_1 has auto_create = backwards
</p>
<p>
    component_1
</p>
<p>
    - component_2
</p>
<p>
    Nestor will allow you to create component_2, and when you do, component_1
    will be automatically created. Very rare, only used to allow people to
    upload and create a media item immediately. Upload a video, then asset
    component gets created to create context.
</p>
<p>
    Technically, you can do both:
</p>
<p>
    - auto_create_backwards
</p>
<p>
    - - The Component Being Created
</p>
<p>
    - - - auto_create_forwards
</p>
<p>
This method is critical for page build so    <strong>we highly recommend not overwriting it or changing it.</strong>
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    recipe_components($each_component, $vce,
                    $auto_create_reverse = null)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $each_component

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The component currently being processed by the Page Build

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    $vce

            </td>
            <td width="162" valign="top">

                    Object

            </td>
            <td width="576" valign="top">

                    The global $vce object, passed for convenience

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    $auto_create_reverse

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

                    Determines if components can automatically be created ahead
                    of or following the current component

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return values

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Hooks
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    page_requested_components receives $each_recipe_component
                    before checking if the user can add the component.
                    $each_recipe_component is the recipe for the next possible
                    component after the component currently being processed.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling this Method
</h3>
<p>
    build_content method in Page checks that component allows sub components to
    be built. If true, call to recipe_components to build out sub components
    for the current component.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    if
                    ($this_component-&gt;allow_sub_components($each_component,
                    $vce)) {


                    // check if prevent_sub_components has been set by previous


                    // allow_sub_components call


                    if (!isset($this-&gt;prevent_sub_components)) {


                    $this_component-&gt;recipe_components($each_component,
                    $vce);


                    }


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="recipe_fields">Recipe Fields</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Adds component fields used in ManageRecipes.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    recipe_fields($recipe)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $recipe

            </td>
            <td width="162" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    Contains all the information for the page recipe

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    Return false if you do not want the component to be
                    available to add to a recipe

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    String

            </td>
            <td width="738" valign="top">

                    Return HTML text that will create the recipe fields for the
                    component

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the Method
</h3>
<p>
    recipe_fields( ) is called by ManageRecipes to determine if a component
    should be available to add to a recipe, and to create the fields used to
    configure the component when it’s added to a recipe.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $recipe_fields =
                    $access-&gt;recipe_fields(array('type'=&gt;$key));

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Overwriting the Method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public function recipe_fields($recipe) {


                    $title = isset($recipe['title']) ? $recipe['title'] :


                    self::component_info()['name'];


                    $elements = &lt;&lt;&lt;EOF


                    &lt;input type="hidden" name="auto_create"
                    value="forward"&gt; &lt;label&gt; &lt;input type="text"
                    name="title" value="$title" tag="required"
                    autocomplete="off"&gt; &lt;div class="label-text"&gt;
                    &lt;div class="label-message"&gt;Title&lt;/div&gt; &lt;div
                    class="label-error"&gt;Enter a Title&lt;/div&gt;
                    &lt;/div&gt; &lt;/label&gt;


                    EOF;


                    return $elements;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="recipe_manifestation">Recipe Manifestation</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Allows for content to be displayed when component is contained within the
    recipe, regardless if a component was created.
</p>
<p>
    This is a ghostly apparition of a sub recipe item.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    recipe_manifestation ($each_recipe_component, $page)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="288" valign="top">

                    $each_recipe_component

            </td>
            <td width="150" valign="top">

                    Object

            </td>
            <td width="498" valign="top">

                    The recipe component for which you are creating content

            </td>
        </tr>
        <tr>
            <td width="288" valign="top">

                    $vce

            </td>
            <td width="150" valign="top">

                    Object

            </td>
            <td width="498" valign="top">

                    The global vce object, passed for convenience

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return value by default

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Calling the Method
</h3>
<p>
    recipe_manifestation is called from Component recipe_components during the
    Page Build. If the current component doesn’t exist, call the parent
    Component class. Either way, this content will be added to the page.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $this_component = new $component_type();


                    $this_component-&gt;recipe_manifestation((object)
                    $each_recipe_component,


                    $vce);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    In this example, the method prints out function to show that this show that
    this component is included in the current recipe.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public static function
                    recipe_manifestation($each_recipe_component, $vce) {


                    $content = &lt;&lt;&lt;EOF


                    &lt;div class="clickbar-container
                    create-observation-container"&gt;


                    &lt;div class="clickbar-content"&gt;


                    EOF;


                    $vce-&gt;content-&gt;add('main',$content);


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="recipe_manifestation_finished">
                        Recipe Manifestation Finish
                    </a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Closes the content to be displayed when component is contained within the
    recipe, regardless if a component was created.
</p>
<p>
    This is a ghostly apparition bookend for recipe_manifestation and occures
    after sub_component item.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    recipe_manifestation_finish ($each_recipe_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="288" valign="top">

                    $each_recipe_component

            </td>
            <td width="150" valign="top">

                    Object

            </td>
            <td width="498" valign="top">

                    The recipe component for which you are creating content

            </td>
        </tr>
        <tr>
            <td width="288" valign="top">

                    $vce

            </td>
            <td width="150" valign="top">

                    Object

            </td>
            <td width="498" valign="top">

                    The global vce object, passed for convenience

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return value by default

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Calling the Method
</h3>
<p>
    recipe_manifestation_finish() is called from Component::recipe_components()
    during the Page Build. It closes the content from recipe_manifestation().
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $previous_component = new $component_type();


                    previous_component-&gt;recipe_manifestation_finish((object)


                    $each_recipe_component, $vce);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    In this example, the method closes out the recipe manifestation.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public static function
                    recipe_manifestation_finish($each_recipe_component, $vce) {


                    $content = &lt;&lt;&lt;EOF


                    &lt;div&gt;end manifestation&lt;/div&gt;


                    EOF;


                    $vce-&gt;content-&gt;add('main',$content);


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="revise_component">Revise Component</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Creates dossiers that are used by the edit component form on a page and
    adds them to $each_component. Then calls self::
    <a
        href="#edit_component"
    >
        edit_component
    </a>
    () to integrate them into HTML on a page. The method is fairly fleshed out
    in the parent Component class, you can overwrite it to include other values
    in the dossier that your component may need to update itself.
</p>
<p>
    *note that this method isn’t currently called within Nestor, but has been
    added for consistency
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    revise_component($each_component, $vce)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="288" valign="top">

                    $each_recipe_component

            </td>
            <td width="150" valign="top">

                    Object

            </td>
            <td width="498" valign="top">

                    The recipe component for which you are creating content

            </td>
        </tr>
        <tr>
            <td width="288" valign="top">

                    $vce

            </td>
            <td width="150" valign="top">

                    Object

            </td>
            <td width="498" valign="top">

                    The global vce object, passed for convenience

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return by default

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Calling the Method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $this_component-&gt;revise_component($each_component,
                    $vce);

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="removed">Removed</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Method that is called when the component is removed. Method is empty in the
    base class and is meant to be overwritten. The removed() method is invoked
    when a component is deleted using the Manage Components page included with
    the basic Nestor Install. If your component has added anything into the
    system, such as Roles or datalists, this would be a good place to remove
    them.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    removed()

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="162" valign="top">

                    No parameters

            </td>
            <td width="576" valign="top">
            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    No return values by default

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    This example shows how associated datalists and metadata are removed from
    the database when the component is removed.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    public function removed() {


                    global $site;


                    $attributes = array (


                    'datalist' =&gt; 'institutions_datalist');


                    $site-&gt;remove_datalist($attributes);


                    global $db;


                    $meta_data = array('institution','program');


                    foreach ($meta_data as $each_data) {


                    // delete user from database


                    $where = array('meta_key' =&gt; $each_data);


                    $db-&gt;delete('users_meta', $where);


                    }


                    }

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Calling the Method
</h3>
<p>
    This example shows removed() being called from the ManageComponents
    component, when a user clicks the delete button for a component.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $removed = $component-&gt;removed();

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="update">Update</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Kicks off the process to update a component. Calls update_component method
    to update the component and data passed in the $input array. Is called
    asynchronously when a user chooses to update a component a page, and
    submits a component form with a dossier with ‘procedure’ set to ‘update’.
    Adds a site attribute with a message that the specified component was
    updated.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    update($input)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $input

            </td>
            <td width="162" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    Array that contains properties of new component that will
                    be created

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" valign="top">

                    Potential members of the $input array

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    component_id

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    ID of component to update

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    created_at

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

                    Timestamp of when the component was created, is used to
                    compare with database entity to make sure we’re updating
                    the right component

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    url

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    url associated with the component, if set in $input will be
                    cleaned by url_checker method

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    sequence

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    Order in which this component will be rendered on the page

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    [<span class="italic">key</span>]

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

                    Any other key/value pairs in $input. Metadata will be
                    updated if the key exists for this component, and added if
                    the key doesn’t already exist. These key/value pairs will
                    most likely come from from form fields from which this
                    request was submitted, but could be added in the update()
                    function.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">
            </td>
            <td width="738" valign="top">

                    Echos success or failure message

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Calling the Method
</h3>
<p>
    The update method is not normally called verbatim in PHP code, but instead
    is triggered when the procedure value in a dossier is set to ‘create’, and
    a form with this dossier is submitted from a page. See the
    <a
        href="#form_input"
    >
        Form Input
    </a>
    section for more details.
</p>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    The Media class invokes a hook and then returns a message indicating
    success or error depending on the return value of its update_component
    method.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    protected function update($input) {


                    global $vce;


                    // load media_update_component hooks


                    if (isset($site-&gt;hooks['media_update_component'])) {


                    foreach($site-&gt;hooks['media_update_component'] as $hook)
                    {


                    $input = call_user_func($hook, $input);


                    }


                    }


                    if (self::update_component($input)) {


                    echo json_encode(array('response' =&gt; 'success',


                    'procedure' =&gt; 'update','action' =&gt; 'reload',


                    'message' =&gt; "Updated"));


                    return;


                    }


                    echo json_encode(array('response' =&gt; 'error',


                    'procedure' =&gt; 'update','message' =&gt; "Error"));


                    return;


                    }

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">
                 
                    <a name="update_component">Update Component</a>
                 
            </td>
        </tr>
    </tbody>
</table>
<p>
    Called by Component update method. Receives an array of properties and uses
    these properties to update records in the database for the specified
    component.
</p>
<p>
    Updates an existing component in [<span class="italic">your_db</span>]_components table using
    parent_id, sequence, and url. Updates or adds any other data as key/value
    pairs to [<span class="italic">your_db</span>]_components_meta table.
</p>
<p>
    If the component has an alias_id set in the [<span class="italic">your_db</span>
    ]_components_meta table, only sequence and URL are updated and none of the
    metadata will be updated.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    update_component($input)

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    $input

            </td>
            <td width="162" valign="top">

                    Array

            </td>
            <td width="576" valign="top">

                    Array that contains properties of new component that will
                    be created

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" valign="top">

                    Potential members of the $input array

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    component_id

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    ID of component to update

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    created_at

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

                    Timestamp of when the component was created, is used to
                    compare with database entity to make sure we’re updating
                    the right component

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    url

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    url associated with the component, if set in $input will be
                    cleaned by url_checker method

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    sequence

            </td>
            <td width="162" valign="top">

                    String (optional)

            </td>
            <td width="576" valign="top">

                    Order in which this component will be rendered on the page

            </td>
        </tr>
        <tr>
            <td width="198" valign="top">

                    [<span class="italic">key</span>]

            </td>
            <td width="162" valign="top">

                    String

            </td>
            <td width="576" valign="top">

                    Any other key/value pairs in $input. Metadata will be
                    updated if the key exists for this component, and added if
                    the key doesn’t already exist. These key/value pairs will
                    most likely come from from form fields from which this
                    request was submitted, but could be added in the update()
                    function.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" valign="top">

                    Boolean

            </td>
            <td width="738" valign="top">

                    True if component is successfully updated, false if
                    unsuccessful update, which can be due to
                    $input[‘created_at’] value not matching the value for the
                    specified component in the [<span class="italic">your_db</span>
                    ]_components_meta table.

            </td>
        </tr>
    </tbody>
</table>
 <h3>
</h3>
 <h3>
</h3>
 <h3>
    Example – Calling the Method<strong></strong>
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" valign="top">

                    $update_status = self::update_component($input);

            </td>
        </tr>
    </tbody>
</table>
 <h3>
    Example – Overwriting the Method
</h3>
<p>
    This method is fleshed out in the parent Component Class, and we don’t
    recommend overwriting it. If you need to customize the component update
    process, use the
    <a
        href="#update"
    >
        update method
    </a>
    .
</p>

<p><a href="#methods">Back to Top</a>


</div><!--end main div-->

 
</body>
</html>
