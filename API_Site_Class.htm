<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Nestor Documentation</title>
  <link rel="stylesheet" href="css/style.css">
  <script type="text/javascript" src="js/scripts.js"></script>
</head>
<body onload="includeHTML()">
  <div id="menu" menu-html="menu.html">

  </div>

  <div class="main">
   <!--INSERT CONTENT HERE-->

<h1>
    Site Class API
</h1>

 <hr size="3" width="100%" align="center"/>

<p>
    The Site class stores metadata used by the site such as theme, site
    description, and relative URL for the codebase. Site also manages file
    dependencies for your Component, as well as any scheduled (cron) tasks
    you’d like to add to the system. This Class also manages a set of Session
    attributes that can be used to store temporary or persistent values across
    a session. Lastly, Site has a method that allows you to add User Roles to
    your installation, as well as Role specific permissions unique to your
    custom Component.
</p>
<p>
    Site meta-data is retrieved from the vce_site_meta table and stored as
    properties of the site object referenced by key name. The site class
    creates a hooks array to track and call functions of components that are
    called later in the load process. It also manages cron tasks, which are
    tasks that need to be scheduled to run periodically.
</p>
<p>
    The $site object is added to the global $vce object during site initiation,
    so make sure to call “global $vce” and then use then use $vce-&gt; site to
    call methods from the global $site object.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935"  class="header_cell">
                
                    Properties
                
            </td>
        </tr>
    </tbody>
</table>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <th width="256" >

                    <strong>Name</strong>

            </th>
            <th width="168" >

                    <strong>Type</strong>

            </th>
            <th width="513" >

                    <strong>Description</strong>

            </th>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $activated_components

            </td>
            <td width="168" >

                    JSON encoded String

            </td>
            <td width="513" >

                    List of the active components in the system.

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $enabled_mediatype

            </td>
            <td width="168" >

                    JSON encoded String

            </td>
            <td width="513" >

                    List of the MediaTypes enabled for use with the Media
                    object.<br><br>


                    Note: if you have built custom components with minions, you will see other similar arrays named $enabled_[<span class="italic">minion name</span >]

            </td>
        </tr>
        <tr>
            <td width="256" >

                    $hooks

            </td>
            <td width="168" >

                    Array

            </td>
            <td width="513" >

                    Holds all the hooks loaded from components. Each hook
                    composed of a class name and method to call, plus other
                    args as defined by the hook

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $installed_components

            </td>
            <td width="168" >

                    JSON encoded String

            </td>
            <td width="513" >

                    List of the components installed in the system.

            </td>
        </tr>
        <tr>
            <td width="256" >

                    $javascript_dependencies

            </td>
            <td width="168" >

                    Array

            </td>
            <td width="513" >

                    Stores paths to js and stylesheet dependencies

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $preloaded_components

            </td>
            <td width="168" >

                    JSON encoded String

            </td>
            <td width="513" >

                    List of the preloaded components in the system.

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $roles

            </td>
            <td width="168" >

                    JSON encoded String

            </td>
            <td width="513" >

                    List of the system roles

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $site_roles

            </td>
            <td width="168" >

                    JSON encoded String

            </td>
            <td width="513" >

                    List of the role access specific to certain components

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $site_description

            </td>
            <td width="168" >

                    String

            </td>
            <td width="513" >

                    Description of your installation, is displayed on the site
                    banner following the Theme title

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $site_email

            </td>
            <td width="168" >

                    String

            </td>
            <td width="513" >

                    Email of site administrator

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $site_menus

            </td>
            <td width="168" >

                    JSON encoded String

            </td>
            <td width="513" >

                    List of the menus available

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $site_theme

            </td>
            <td width="168" >

                    String

            </td>
            <td width="513" >

                    Tells system which theme pages to use

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $site_title

            </td>
            <td width="168" >

                    String

            </td>
            <td width="513" >

                    Title that is inserted as the HTML page title, displays as
                    tab or page name in the browser

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $site_url

            </td>
            <td width="168" >

                    String

            </td>
            <td width="513" >

                    URL that resolves to your installation of Nestor

            </td>
        </tr>
        <tr>
            <td width="256"  class="purple">

                    $user_attributes

            </td>
            <td width="168" >

                    JSON encoded String

            </td>
            <td width="513" >

                    List of the custom user attributes created in your
                    installation

            </td>
        </tr>
    </tbody>
</table>

<table border="1" cellspacing="0" cellpadding="0">
        <tbody>
            <tr>
                <td width="935"  class="header_cell">
                    
                        Site properties stored in the site_meta table
                    
                </td>
            </tr>
        </tbody>
    </table>

<p>
    Most of the properties in the Site class (marked <span class="purple">purple</span> in the table above)
    are not created when the site object is instantiated, but instead are
    retrieved from the [<span class="italic">yourdb</span >]_site_meta table then added as
    key / value pairs to the $site object. The purple properties listed above
    are the standard values populated during the installation process. This
    gives you the flexibility to add your own values to the $site object that
    can be used for your own custom functionality.
</p>
<p>
    Since these properties are stored in your database instance, you are able
    to change them by directly editing your database table instead of programmatically. This is an easy option to update some of the properties, such as site_description, site_theme and site_title. However, we would strongly caution you <strong>NOT</strong> to change the following properties, as this may cause
    your installation to stop working properly.
</p>

<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <th width="256" >

                    <strong>Property</strong>

            </th>
            <th width="681" >

                    <strong>Correct Method to Update</strong>

            </th>
        </tr>
        <tr>
            <td width="256" >

                    activated_components

            </td>
            <td width="681" >

                    Use the <a href="manage_components.htm">Manage Components</a> interface.

            </td>
        </tr>
        <tr>
            <td width="256" >

                    enabled_mediatype

            </td>
            <td width="681" >

                    Use  the <a href="manage_components.htm">Manage Components</a> interface. When you
                    activate the parent <a href="components_media.htm">Media Component</a>, you’ll then have the
                    option to activate individual MediaTypes

            </td>
        </tr>
        <tr>
            <td width="256" >

                    hooks

            </td>
            <td width="681" >

                    See section on <a href="extend_hooks.htm">adding hooks</a> to a custom component

            </td>
        </tr>
        <tr>
            <td width="256" >

                    installed_components

            </td>
            <td width="681" >

                    Use the <a href="manage_components.htm">Manage Components</a> interface.

            </td>
        </tr>
        <tr>
            <td width="256" >

                    javascript_dependencies

            </td>
            <td width="681" >

                    Call
                    <a
                        href="#add_script"
                    >
                        $vce-&gt;site-&gt; add_script
                    </a>

            </td>
        </tr>
        <tr>
            <td width="256" >

                    preloaded_components

            </td>
            <td width="681" >

                    Overwrite the <a href="API_Component_Class#preload_component">preload_component</a> method in your component

            </td>
        </tr>
        <tr>
            <td width="256" >

                    roles

            </td>
            <td width="681" >

                    Update roles using the <a href="manage_roles.htm">Manage Roles</a> interface.

            </td>
        </tr>
        <tr>
            <td width="256" >

                    site_menus

            </td>
            <td width="681" >

                    Update menus using the <a href="manage_menus.htm">Manage Menus</a> interface.

            </td>
        </tr>
        <tr>
            <td width="256" >

                    user_attributes

            </td>
            <td width="681" >

                    Use the <a href="manage_users.htm">Manage Users</a> interface.

            </td>
        </tr>
    </tbody>
</table>
<p>
    Future builds of Nestor will contain methods to allow you to
    programmatically change some of these properties without breaking the site.
</p>
<table border="1" cellspacing="0" cellpadding="0" id="methods">
    <tbody>
        <tr>
            <td width="935"  class="header_cell">
                
                  Methods
                
            </td>
        </tr>
    </tbody>
</table>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <th width="387" >

                    <strong>Name/Syntax</strong>
                    

            </th>
            <th width="549" >

                    <strong>Description</strong>

            </th>
        </tr>
        <tr>
            <td width="387" >

                    <strong>
                        <a
                            href="#add_attributes"
                        >
                            add_attributes
                        </a>
                    </strong>
                    ($key, $value, $persistant = false)

            </td>
            <td width="549" >

                    Add key/value pairs to the the Session Object
                    ‘add_attributes’ property, which get added to the page
                    object on the next load.

            </td>
        </tr>
        <tr>
            <td width="387" >

                    <strong>
                        <a
                            href="#add_script"
                        >
                            add_script
                        </a>
                    </strong>
                    ($path, $dependencies = null, $footer = null)

            </td>
            <td width="549" >

                    Add javascript or style sheet to the rendered page

            </td>
        </tr>
        <tr>
            <td width="387" >

                    <strong>
                        <a
                            href="#add_site_roles"
                        >
                            add_site_roles
                        </a>
                    </strong>
                    ($attributes)

            </td>
            <td width="549" >

                    Add new roles to the site

            </td>
        </tr>
        <tr>
            <td width="387" >

                    <strong>
                        <a
                            href="#add_style"
                        >
                            add_style
                        </a>
                    </strong>
                    ($path, $name = null, $media = 'all')

            </td>
            <td width="549" >

                    Add stylesheet to the rendered page

            </td>
        </tr>
        <tr>
            <td width="387" >

                    <strong>
                        <a
                            href="#get_template_names"
                        >
                            get_template_names
                        </a>
                    </strong>
                    ( )

            </td>
            <td width="549" >

                    Creates an array of template names with complete file paths
                    that reside in the current theme directory.

            </td>
        </tr>
        <tr>
            <td width="387" >

                    <strong>
                        <a
                            href="#media_link"
                        >
                            media_link
                        </a>
                    </strong>
                    ($fileinfo)

            </td>
            <td width="549" >

                    Generates the full path to a file, given an array with file
                    properties

            </td>
        </tr>
        <tr>
            <td width="387" >

                    <strong>
                        <a
                            href="#remove_attributes"
                        >
                            remove_attributes
                        </a>
                    </strong>
                    ($key)

            </td>
            <td width="549" >

                    Remove an attribute from the Session Object
                    ‘add_attributes’ property

            </td>
        </tr>
        <tr>
            <td width="387" >

                    <strong>
                        <a
                            href="#retrieve_attributes"
                        >
                            retrieve_attributes
                        </a>
                    </strong>
                    ($key)

            </td>
            <td width="549" >

                    Retrieve an attribute from the Session Object
                    ‘add_attributes’ property

            </td>
        </tr>
        <tr>
            <td width="387" >

                    <strong>
                        <a
                            href="#url_checker"
                        >
                            url_checker
                        </a>
                    </strong>
                    ($url)

            </td>
            <td width="549" >

                    Checks if a url has already been assigned to a component in
                    another Recipe

            </td>
        </tr>
    </tbody>
</table>
<p>
    <a
        href="#Function_Name"
    >
        Add Function Name
    </a>
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935"  class="header_cell">
                
                    Method Details
                
            </td>
        </tr>
    </tbody>
</table>

<table border="1" cellspacing="0" cellpadding="0" id="add_attributes">
    <tbody>
        <tr>
            <td width="935"  class="method_name">
                
                    Add Attributes
                
            </td>
        </tr>
    </tbody>
</table>
<p>
    Add key/value pairs to a session variable, which get added to the page
    object on the next load. Are stored in a JSON encoded string in the session
    object. These values are used to store information that can be retrieved
    from any component in the system.
</p>
<p>
    If you do not pass a value of true for $persistant, this value will be
    removed from the session by the end of the Page build process.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935"  class="method_syntax">

                    add_attributes($key, $value, $persistant = false)

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" >

                    $key

            </td>
            <td width="162" >

                    String

            </td>
            <td width="576" >

                    Key for the attribute

            </td>
        </tr>
        <tr>
            <td width="198" >

                    $value

            </td>
            <td width="162" >

                    String

            </td>
            <td width="576" >

                    Value to associate with $key in the Object

            </td>
        </tr>
        <tr>
            <td width="198" >

                    $persistant

            </td>
            <td width="162" >

                    Boolean (Optional)

            </td>
            <td width="576" >

                    Determines whether the value is loaded back into the
                    session variable after being added to page object, or
                    deleted. Allows the value to persist between page loads.

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td >

                    No return values

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Example
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935"  class="codified">

                    $vce-&gt;site-&gt;add_attributes('message','Alias
                    Created');

            </td>
        </tr>
    </tbody>
</table>
<p><a href="#methods">Back to Top</a></p>
<table border="1" cellspacing="0" cellpadding="0" id="add_script">
    <tbody>
        <tr>
            <td width="935" class="method_name">Add Script
                
            </td>
        </tr>
    </tbody>
</table>
<p>
    Adds full path information to a supplied path, and then adds this script to
    the site $javascript_dependencies array. These scripts are added to the
    content object, which will then add the scripts to the rendered page. If
    $dependencies is supplied, a corresponding stylesheet(s) is added to the
    $site object. (see
    <a
        href="#add_style"
    >
        Add Style
    </a>
    method). Often called from theme.php page for a site.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935"  class="method_syntax">

                    add_script($path, $dependencies = null, $footer = null)

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="174" >

                    $path

            </td>
            <td width="159" >

                    String

            </td>
            <td width="603" >

                    Path to the file, relative to the component directory

            </td>
        </tr>
        <tr>
            <td width="174" >

                    $dependencies

            </td>
            <td width="159" >

                    String


                    (Optional)

            </td>
            <td width="603" >

                    Any stylesheet dependencies that should be added with the
                    javascript file. Can designate more than one, separated by
                    “ “. If there is a stylesheet in the site
                    $javascript_dependencies array that matches the
                    $dependencies value, the stylesheet is added to the page.

            </td>
        </tr>
        <tr>
            <td width="174" >

                    $footer

            </td>
            <td width="159" >

                    Boolean


                    (Optional)

            </td>
            <td width="603" >

                    If supplied, javascript will be added to
                    content-&gt;javascript_footer instead of
                    content-&gt;javascript. This would position the script on
                    the rendered page after any scripts in
                    content-&gt;javascript.

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td >

                    No return values

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Example
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="codified">

                    $vce-&gt;site-&gt;add_script(dirname(__FILE__) .
                    '/js/jquery-nestable.js',


                    'jquery tablesorter');<br>


                    $vce-&gt;site-&gt;add_script(dirname(__FILE__) .
                    '/js/script.js');

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a></p>

<table border="1" cellspacing="0" cellpadding="0" id="add_site_roles">
    <tbody>
        <tr>
            <td width="935"  class="method_name">          
                    Add Site Roles
                
            </td>
        </tr>
    </tbody>
</table>
<p>
    Add new roles to the site, with an optional value of permissions. An
    individual class can assign granular permissions to each role, which will
    define what a user with this role can do within this particular component.
    There are 2 areas in the code that need to be completed to fully wire up
    these permissions.
</p>
<p>
    1) Each component has a component_info() function which provides basic
    properties for the component when called. One of these (optional)
    properties can be a permissions array that defines permissions for the
    component.
</p>
<p>
    2) There is an optional permissions property that can be passed into
    add_site_roles for each role. If this property has values that match those
    in the component-&gt;permissions array, these permissions will be granted
    to the specified role.
</p>
<p>
    3) The system will detect which component is calling add_site_roles(), and
    if permissions are supplied will associate these role-based permissions
    with the calling component in the site_meta table roles field.
</p>
<p>
    4) If these permissions are not provided to the add_site_roles() method,
    they will not be assigned to roles. However, you can build tools to assign
    them. An example is the ManageComponents component installed with Nestor,
    which shows a grid for each component with unique permissions. This grid
    allows an Admin user to see the Component-based permissions and assign them
    to individual roles.
</p>
<p>
    <img
        border="0"
        width="945"
        height="305"
        src="images/screen_clips/blogorama_permissions.png"
    />
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935"  class="method_syntax">

                    add_site_roles($attributes)

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="252" >

                    $attributes

            </td>
            <td width="153" >

                    Array

            </td>
            <td width="531" >

                    Information about the new site roles to add. Can hold more
                    than one array, each array represents one new role

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" class="bold">

                    Values in the $attributes array

            </td>
        </tr>
        <tr>
            <td width="252" >
            </td>
            <td width="153" >

                    Array

            </td>
            <td width="531" >

                    Anonymous arrays with information about each role to add

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" class="bold">

                    Values in the individual roles arrays

            </td>
        </tr>
        <tr>
            <td width="252" >

                    role_name

            </td>
            <td width="153" >

                    String

            </td>
            <td width="531" >

                    Name of role

            </td>
        </tr>
        <tr>
            <td width="252" >

                    role_hierarchy

            </td>
            <td width="153" >

                    Int

            </td>
            <td width="531" >

                    Order in which this role will appear in a rendered list of
                    roles

            </td>
        </tr>
        <tr>
            <td width="252" >

                    permissions

            </td>
            <td width="153" >

                    String


                    (Optional)

            </td>
            <td width="531" >

                    Assigns unique permissions from the calling Component Class
                    to roles. Each permission you would like to assign to a
                    role is separated by a comma in the string.

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" class="bold"> 

                    Values set in component info permissions array (Optional)

            </td>
        </tr>
        <tr>
            <td width="252" >

                    name

            </td>
            <td width="153" >

                    String

            </td>
            <td width="531" >

                    Name of the unique permission

            </td>
        </tr>
        <tr>
            <td width="252" >

                    description

            </td>
            <td width="153" >

                    String

            </td>
            <td width="531" >

                    Description of how this permission is used

            </td>
        </tr>
        <tr>
            <td width="252" >

                    type

            </td>
            <td width="153" >

                    String


                    (Optional)

            </td>
            <td width="531" >

                    If set to ‘singular’, role options will be shown as radio
                    buttons. If not set to ‘singular’, options will have check
                    boxes.

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td >
                 No return values

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Example
</h3>
<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="codified">

                    
        
            $attributes = array (<br>
        
        
            &nbsp;&nbsp;array (<br>
        
        
            &nbsp;&nbsp;&nbsp;&nbsp;'role_name' =&gt; 'Moderator',<br>
        
        
            &nbsp;&nbsp;&nbsp;&nbsp;'role_hierarchy' =&gt; '1',<br>
        
        
            &nbsp;&nbsp;&nbsp;&nbsp;'permissions' =&gt; 'Read,Write,Delete'<br>
        
        
        
        
            &nbsp;&nbsp;),<br>
        
        
            &nbsp;&nbsp;array (<br>
        
        
            &nbsp;&nbsp;&nbsp;&nbsp;'role_name' =&gt; 'Author',<br>
        
        
            &nbsp;&nbsp;&nbsp;&nbsp;'role_hierarchy' =&gt; '2',<br>
        
        
            &nbsp;&nbsp;&nbsp;&nbsp;'permissions' =&gt; 'Read,Write'<br>
        
        
            &nbsp;&nbsp;),<br>
        
        
            &nbsp;&nbsp;array (<br>
        
        
            &nbsp;&nbsp;&nbsp;&nbsp;'role_name' =&gt; 'Visitor',<br>
        
        
            &nbsp;&nbsp;&nbsp;&nbsp;'role_hierarchy' =&gt; '3',<br>
        
        
            &nbsp;&nbsp;&nbsp;&nbsp;'permissions' =&gt; 'Read'<br>
        
        
            &nbsp;&nbsp;)<br>
        
        
        
        
            );<br>
        
        
            $vce-&gt;site-&gt;add_site_roles($attributes);<br>
             
            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a></p>

<table border="1" cellspacing="0" cellpadding="0" id="add_style">
    <tbody>
        <tr>
            <td width="935" class="method_name">Add Style
                
            </td>
        </tr>
    </tbody>
</table>
<p>
    Add a stylesheet to the content object, which will add it to the rendered
    page. Often called from theme.php page for a site.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="method_syntax">

                    add_style($path, $name = null, $media = 'all')

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="171" >

                    $path

            </td>
            <td width="162" >

                    String

            </td>
            <td width="603" >

                    Path to the stylesheet, usually supplied relative to the
                    component directory

            </td>
        </tr>
        <tr>
            <td width="171" >

                    $name

            </td>
            <td width="162" >

                    String


                    (Optional)

            </td>
            <td width="603" >

                    Name of the stylesheet to be added to the script tag, if
                    called from add_script() this will be the filename without
                    the extension, + ‘-style’

            </td>
        </tr>
        <tr>
            <td width="171" >

                    $media

            </td>
            <td width="162" >

                    String


                    (Optional)

            </td>
            <td width="603" >

                    Media property of the script tag

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td>

                    No return values

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Example
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="codified">

                    $vce-&gt;site-&gt;add_style(dirname(__FILE__) .
                    '/css/jquery-nestable.css',


                    'jquery-nestable-style');

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a></p>

<table border="1" cellspacing="0" cellpadding="0"  id="get_template_names">
    <tbody>
        <tr>
            <td width="935" class="method_name">Get Template Names
            </td>
        </tr>
    </tbody>
</table>
<p>
    Creates an array of template names that reside in the current theme
    directory. Useful for components where you want to give the end user a list
    of templates to choose from. Excludes theme.php file.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="method_syntax">

                    get_template_names()

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td>

                    No parameters

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" >

                    Array

            </td>
            <td width="738" >

                    Returns an array of the template files contained in the
                    current theme directory.

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Example
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="codified">

                    $elements = "elements: ";<br>


                    foreach($vce-&gt;site-&gt;get_template_names() as
                    $file_name=&gt;$file_path) {<br>


                    &nbsp;&nbsp;$elements .= '&lt;option value="' . $file_path . '"';<br>


                    &nbsp;&nbsp;$elements .= '&gt;' . $ file_name . '&lt;/option&gt;';<br>


                    }

            </td>
        </tr>
        <tr>
            <td width="935" >
            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a></p>

<table border="1" cellspacing="0" cellpadding="0" id="media_link">
    <tbody>
        <tr>
            <td width="935" class="method_name">Media Link
                
            </td>
        </tr>
    </tbody>
</table>
<p>
    Generates the full path to a file, given an array with file properties.
    Uses either the global constant ASSETS_URL if defined and
    $site-&gt;site_url if not, and the global constant PATH_TO_UPLOADS to
    construct the path.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="method_syntax">

                    media_link($fileinfo)

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" >

                    $fileinfo

            </td>
            <td width="162" >

                    Array

            </td>
            <td width="576" >

                    Contains properties for file for which a media link will be
                    generated.

            </td>
        </tr>
        <tr>
            <td width="936" colspan="3" >

                    Potential members of $fileinfo array

            </td>
        </tr>
        <tr>
            <td width="198" >

                    expires

            </td>
            <td width="162" >

                    Int

            </td>
            <td width="576" >

                    how many seconds this link will be functional

            </td>
        </tr>
        <tr>
            <td width="198" >

                    path

            </td>
            <td width="162" >

                    String

            </td>
            <td width="576" >

                    path relative to the uploads directory, as defined by site
                    properties

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" >

                    String

            </td>
            <td width="738" >

                    Full path to where file resides, useful to populate HTML
                    tags to link to files

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Hooks
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" >

                    <span class="hook">site_media_link</span> is called just before the function returns
                    the Media Link

            </td>
        </tr>
    </tbody>
</table>
<h3>
</h3>
<h3>
    Example
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="codified">

                    $fileinfo = array(<br>


                    &nbsp;&nbsp;'expires' =&gt; 30,<br>


                    &nbsp;&nbsp;'path' =&gt; $each_component-&gt;created_by . '/' .
                    $each_component-&gt;path


                    );<br>


                    $imagePath = '&lt;img class="vce-image" src="'.


                    $vce-&gt;site-&gt;media_link($fileinfo).'"&gt;';

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a></p>

<table border="1" cellspacing="0" cellpadding="0" id="remove_attributes">
    <tbody>
        <tr>
            <td width="935" class="method_name">Remove Attributes
                
            </td>
        </tr>
    </tbody>
</table>
<p>
    Remove an attribute from the Session Object ‘add_attributes’ property.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="method_syntax">

                    remove_attributes($key)

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" >

                    $key

            </td>
            <td width="162" >

                    String

            </td>
            <td width="576" >

                    Key to the value that you want to remove

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td>

                    No return value

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Example
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="codified">

                    $vce-&gt;site-&gt;remove_attributes('webdam_token_expires');

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a></p>

<table border="1" cellspacing="0" cellpadding="0" id="retrieve_attributes">
    <tbody>
        <tr>
            <td width="935" class="method_name">Retrieve Attributes
                
            </td>
        </tr>
    </tbody>
</table>
<p>
    Retrieve an attribute from the Session Object ‘add_attributes’ property.
    This Session property is a JSON encoded string, so stores a number of
    key/value pairs.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="method_syntax">

                    retrieve_attributes($key)

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" >

                    $key

            </td>
            <td width="162" >

                    String

            </td>
            <td width="576" >

                    Key to the value that you want to retrieve

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" >

                    String

            </td>
            <td width="738" >

                    Value of the indicated $key in the Session ‘add_attributes’
                    property

            </td>
        </tr>
        <tr>
            <td width="198" >

                    null

            </td>
            <td width="738" >

                    Returns null if the specified $key isn’t set

            </td>
        </tr>
    </tbody>
</table>

<h3>
    Example
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="codified">

                    $webdam_token_expires =
                    $vce-&gt;site-&gt;retrieve_attributes('webdam_token_expires');

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a></p>

<table border="1" cellspacing="0" cellpadding="0" id="url_checker">
    <tbody>
        <tr>
            <td width="935" class="method_name">URL Checker
                
            </td>
        </tr>
    </tbody>
</table>
<p>
    Checks if a URL has already been assigned to component in another Recipe.
    If URL is available for use, returns a cleaned version for calling function
    to use. The cleaned version has any white space replaced with ‘-‘. URLs are
    assigned to a component when it’s the first component in a Recipe, and
    there is Location component in the Recipe with a URL property. Having the
    same URL assigned to a component in separate Recipes would cause confusion
    in the system.
</p>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="method_syntax">

                    url_checker($url)

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Parameters
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" >

                    $url

            </td>
            <td width="162" >

                    String

            </td>
            <td width="576" >

                    URL that you are checking for duplicates

            </td>
        </tr>
    </tbody>
</table>
<h3>
    Return
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="198" >

                    String

            </td>
            <td width="738" >

                    If this URL is not being used, will return a cleaned URL

            </td>
        </tr>
        <tr>
            <td width="198" >

                    String

            </td>
            <td width="738" >

                    If this URL is being used, will add ‘-2’ to the cleaned URL
                    and check this version. If the ‘-2’ version is available,
                    it will return this URL to the calling function.

            </td>
        </tr>
    </tbody>
</table>

<h3>
    Example
</h3>
<table border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="935" class="codified">

                    $url = 'admin';<br>


                    $vce-&gt;site-&gt;url_checker($url);<br><br>


                    //returns menu-admin if available for use<br>
                    //returns menu-admin-2 if already in use

            </td>
        </tr>
    </tbody>
</table>

<p><a href="#methods">Back to Top</a></p>




  </div><!--end main div-->

 
</body>
</html>
